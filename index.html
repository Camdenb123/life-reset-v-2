<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zen Life Reset</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet" />
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#00796b" />
  <style>
    body {
      margin: 0; padding: 0;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(to bottom right, #e0f7fa, #fff3e0);
      color: #37474f;
    }
    .container {
      max-width: 600px;
      margin: 60px auto;
      padding: 25px;
      background: #ffffffcc;
      backdrop-filter: blur(8px);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    h1, h2 {
      text-align: center;
      color: #00796b;
    }
    .reading {
      text-align: center;
      margin-bottom: 20px;
    }
    .reading button {
      background: #00796b;
      color: white;
      padding: 10px 16px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .task {
      background: #fafafa;
      border: 1px solid #cfd8dc;
      border-radius: 10px;
      padding: 12px 16px;
      margin: 15px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 16px;
    }
    .task label {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .task input[type="checkbox"] {
      transform: scale(1.3);
    }
    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      text-align: center;
    }
    .stats div {
      background: #e0f2f1;
      border-radius: 10px;
      padding: 15px;
      width: 30%;
    }
    .progress-bar {
      margin-top: 10px;
      background: #b2dfdb;
      border-radius: 10px;
      overflow: hidden;
      height: 14px;
    }
    .progress-fill {
      background: #00796b;
      height: 100%;
      width: 0%;
      transition: width 0.3s ease-in-out;
    }
    #levelUpMessage {
      margin-top: 15px;
      text-align: center;
      color: #388e3c;
      font-weight: bold;
      display: none;
    }
    .btn {
      background: #00796b;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin: 30px auto 0;
      display: block;
      cursor: pointer;
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 10;
      left: 0; top: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
    }
    .modal-content {
      background: white;
      margin: 15% auto;
      padding: 20px;
      width: 80%;
      border-radius: 10px;
      max-width: 500px;
    }
    .close {
      float: right;
      cursor: pointer;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="appTitle">
    <h1 id="appTitle">ğŸ§˜ Zen Life Reset</h1>
    <h2>Day <span id="dayNumber"></span> of 60</h2>
    <div class="reading">
      <button aria-label="Read today's book excerpt" onclick="showExcerpt()">ğŸ“– Read this excerpt</button>
    </div>
    <div id="taskContainer" aria-live="polite" aria-relevant="additions"></div>
    <div class="stats" role="region" aria-label="User stats">
      <div><strong>XP</strong><div><span id="xp">0</span>/100</div><div class="progress-bar"><div class="progress-fill" id="xpBar"></div></div></div>
      <div><strong>Coins</strong><div><span id="coins">0</span></div></div>
      <div><strong>Streak</strong><div><span id="streak">0</span> days</div></div>
    </div>
    <div id="levelUpMessage" role="alert" aria-live="assertive">ğŸ‰ You leveled up! Great job! ğŸ‰</div>
    <button class="btn" onclick="resetDay()">Start New Day</button>
  </div>

  <div class="modal" id="excerptModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="excerptText">
    <div class="modal-content">
      <button class="close" aria-label="Close excerpt modal" onclick="closeExcerpt()">&times;</button>
      <p id="excerptText"></p>
    </div>
  </div>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').then(() => {
        console.log('Service Worker registered');
      }).catch(err => {
        console.warn('Service Worker registration failed:', err);
      });
    }

    const excerpts = [
      "â€œYou have power over your mindâ€”not outside events. Realize this, and you will find strength.â€ â€” Marcus Aurelius",
      "â€œThe best way out is always through.â€ â€” Robert Frost",
      "â€œIt is not length of life, but depth of life.â€ â€” Ralph Waldo Emerson",
      "â€œDo what you can, with what you have, where you are.â€ â€” Theodore Roosevelt",
      "â€œSuccess is not final, failure is not fatal: it is the courage to continue that counts.â€ â€” Winston Churchill",
      "â€œLife appears to me too short to be spent in nursing animosity or registering wrongs.â€ â€” Charlotte BrontÃ«",
      "â€œOur life is what our thoughts make it.â€ â€” Marcus Aurelius",
      "â€œAll that we are is the result of what we have thought.â€ â€” Buddha",
      "â€œWhat lies behind us and what lies before us are tiny matters compared to what lies within us.â€ â€” Emerson",
      "â€œHappiness depends upon ourselves.â€ â€” Aristotle",
      "â€œThe mind is everything. What you think you become.â€ â€” Buddha",
      "â€œAct as if what you do makes a difference. It does.â€ â€” William James",
      "â€œYou miss 100% of the shots you donâ€™t take.â€ â€” Wayne Gretzky",
      "â€œHe who is brave is free.â€ â€” Seneca",
      "â€œTo live is the rarest thing in the world. Most people exist, that is all.â€ â€” Oscar Wilde",
      "â€œEvery strike brings me closer to the next home run.â€ â€” Babe Ruth",
      "â€œCourage doesn't always roar.â€ â€” Mary Anne Radmacher",
      "â€œIt is never too late to be what you might have been.â€ â€” George Eliot",
      "â€œLife isnâ€™t about finding yourself. Life is about creating yourself.â€ â€” George Bernard Shaw",
      "â€œEven if I knew that tomorrow the world would go to pieces, I would still plant my apple tree.â€ â€” Martin Luther",
      "â€œTurn your wounds into wisdom.â€ â€” Oprah Winfrey",
      "â€œDo not go where the path may lead, go instead where there is no path and leave a trail.â€ â€” Emerson",
      "â€œLife is either a daring adventure or nothing at all.â€ â€” Helen Keller",
      "â€œThe journey of a thousand miles begins with one step.â€ â€” Lao Tzu",
      "â€œYou must be the change you wish to see in the world.â€ â€” Gandhi",
      "â€œWe are what we repeatedly do. Excellence, then, is not an act, but a habit.â€ â€” Aristotle",
      "â€œThere is no greater agony than bearing an untold story inside you.â€ â€” Maya Angelou",
      "â€œKnowing yourself is the beginning of all wisdom.â€ â€” Aristotle",
      "â€œIt always seems impossible until itâ€™s done.â€ â€” Nelson Mandela",
      "â€œSimplicity is the ultimate sophistication.â€ â€” Leonardo da Vinci",
      "â€œWhat you do makes a difference, and you have to decide what kind of difference you want to make.â€ â€” Jane Goodall",
      "â€œTo be yourself in a world that is constantly trying to make you something else is the greatest accomplishment.â€ â€” Emerson",
      "â€œThe only way to do great work is to love what you do.â€ â€” Steve Jobs",
      "â€œDonâ€™t count the days, make the days count.â€ â€” Muhammad Ali",
      "â€œDonâ€™t wait. The time will never be just right.â€ â€” Napoleon Hill",
      "â€œBelieve you can and you're halfway there.â€ â€” Theodore Roosevelt",
      "â€œThere is only one happiness in this life, to love and be loved.â€ â€” George Sand",
      "â€œGreat minds discuss ideas; average minds discuss events; small minds discuss people.â€ â€” Eleanor Roosevelt",
      "â€œBe yourself; everyone else is already taken.â€ â€” Oscar Wilde",
      "â€œWhat you get by achieving your goals is not as important as what you become by achieving your goals.â€ â€” Zig Ziglar",
      "â€œStart where you are. Use what you have. Do what you can.â€ â€” Arthur Ashe",
      "â€œIn three words I can sum up everything I've learned about life: it goes on.â€ â€” Robert Frost",
      "â€œThe only limit to our realization of tomorrow is our doubts of today.â€ â€” Franklin D. Roosevelt",
      "â€œI have not failed. I've just found 10,000 ways that won't work.â€ â€” Thomas Edison",
      "â€œDream big and dare to fail.â€ â€” Norman Vaughan",
      "â€œFall seven times and stand up eight.â€ â€” Japanese Proverb",
      "â€œA year from now you may wish you had started today.â€ â€” Karen Lamb",
      "â€œDonâ€™t be pushed around by the fears in your mind. Be led by the dreams in your heart.â€ â€” Roy T. Bennett",
      "â€œEverything you can imagine is real.â€ â€” Pablo Picasso",
      "â€œHappiness is not something ready made. It comes from your own actions.â€ â€” Dalai Lama",
      "â€œWhat we think, we become.â€ â€” Buddha",
      "â€œBe kind whenever possible. It is always possible.â€ â€” Dalai Lama",
      "â€œDonâ€™t cry because itâ€™s over, smile because it happened.â€ â€” Dr. Seuss",
      "â€œI can be changed by what happens to me. But I refuse to be reduced by it.â€ â€” Maya Angelou",
      "â€œYou are never too old to set another goal or to dream a new dream.â€ â€” C.S. Lewis",
      "â€œA journey is best measured in friends, not in miles.â€ â€” Tim Cahill",
      "â€œSuccess is how high you bounce when you hit bottom.â€ â€” George S. Patton",
      "â€œIt does not matter how slowly you go as long as you do not stop.â€ â€” Confucius",
      "â€œEverything has beauty, but not everyone sees it.â€ â€” Confucius",
      "â€œPeace begins with a smile.â€ â€” Mother Teresa",
      "â€œBe the light that helps others see.â€ â€” Unknown"
    ];

    const today = new Date().toISOString().split("T")[0];
    let lastReset = localStorage.getItem("lastReset") || "";
    let streak = parseInt(localStorage.getItem("streak") || "0");
    if (lastReset !== today) {
      streak += 1;
      localStorage.setItem("streak", streak);
      localStorage.setItem("lastReset", today);
      localStorage.setItem("xp", "0");
      localStorage.setItem("coins", "0");
      for (let i = 0; i < 5; i++) localStorage.removeItem(`task${i}`);
    }

    const dayNumber = Math.min(streak, 60);
    document.getElementById("dayNumber").innerText = dayNumber;

    // Daily unique tasks for 60 days, 4 tasks + reading per day
    const dailyTasks = [
      ["ğŸ§Š Cold shower", "ğŸŒ… Watch the sunrise", "ğŸ’¬ Compliment someone", "ğŸ’§ Drink 8 glasses of water"],
      ["ğŸ§˜ Meditate 10 minutes", "âœï¸ Journal 1 sentence", "ğŸ Eat a whole fruit", "ğŸš¶ Walk 15 min outdoors"],
      ["ğŸ“µ Delete one app", "ğŸ§â€â™‚ï¸ Stretch for 5 minutes", "ğŸ™ List 3 gratitudes", "ğŸ”Œ Turn phone off 30 min"],
      ["ğŸ¨ Make something by hand", "ğŸ§¹ Clean a cluttered spot", "ğŸ“± Call or text a friend", "ğŸŒ¬ï¸ 3 deep 5-sec breaths"],
      ["ğŸ“œ Write your future self", "ğŸš° Water only 4 hrs", "ğŸŒ¿ Go barefoot outside", "ğŸ˜´ Sleep before 10pm"],
      ["ğŸ§ Listen to new music", "ğŸ’­ Write down a fear", "ğŸ’ª 15 squats or pushups", "ğŸ½ï¸ Eat without distraction"],
      ["ğŸ˜‚ Make someone laugh", "ğŸ¤ 10 minutes no talking", "ğŸ•¯ï¸ Sit with a candle 5 min", "ğŸ’¡ Counter 1 bad belief"],
      ["ğŸ“š Read a Wikipedia page", "ğŸ¤ Forgive someone mentally", "ğŸ›ï¸ Make your bed mindfully", "ğŸ¥¬ Eat something green"],
      ["ğŸ˜Œ Sit in silence 5 min", "âœï¸ Draw something", "ğŸ‘• Dress to feel confident", "ğŸŒŸ Leave a good review"],
      ["ğŸ‘ï¸ Hold eye contact longer", "â›°ï¸ Walk uphill/stairs", "ğŸ“– Read physical book 10 min", "ğŸµ Make tea, focus on it"],
      ["ğŸ’¬ Describe your emotion", "ğŸ™‚ Smile at a stranger", "ğŸš« Say no to something today", "ğŸ’¡ Eat without your phone"],
      ["ğŸ† Reflect on something proud", "ğŸ—‘ï¸ Declutter one item", "ğŸ§  Guided meditation 10 min", "âœ¨ Recall biggest win this year"],
      ["ğŸ’— Say 'I love you' to yourself", "ğŸ§ Stretch every hour today", "ğŸ—“ï¸ Write top 3 priorities", "ğŸ’ƒ Move differently today"],
      ["ğŸ“µ No social media till lunch", "â³ Work 30 min distraction-free", "ğŸ¥˜ Cook from scratch", "ğŸ‘‚ Listen outside for 2 min"],
      ["ğŸ¯ Write a goal", "ğŸ§– Let yourself relax", "ğŸ“¬ Unsubscribe from an email", "ğŸ”® Visualize your ideal future"],
      ["ğŸ“´ Leave your phone in another room", "ğŸ§˜ Yoga stretch", "ğŸ² Try a new recipe", "ğŸ“… Plan your week ahead"],
      ["ğŸ¼ Listen to a new genre", "ğŸ“ Write a thank you note", "ğŸŒ³ Spend time in nature", "ğŸ›€ Take a relaxing bath"],
      ["ğŸ¤ Help someone in need", "ğŸ“º Limit screen time to 1 hour", "ğŸ’¤ Take a power nap", "ğŸ–¼ï¸ Create a vision board"],
      ["ğŸŒ¸ Plant a seed or flower", "ğŸ“· Take photos mindfully", "ğŸ’­ Practice positive affirmations", "ğŸ“– Read about a new topic"],
      ["ğŸ§© Solve a puzzle or brain teaser", "ğŸ•º Dance for 5 minutes", "ğŸ‘¥ Have a meaningful conversation", "ğŸ² Play a board game"],
      ["ğŸ“š Organize your bookshelf", "ğŸ§´ Self-care: skincare or massage", "ğŸ›‹ï¸ Declutter one area of your home", "ğŸš´ Ride a bike"],
      ["ğŸ« Treat yourself mindfully", "ğŸ“… Review monthly goals", "ğŸ—£ï¸ Speak kindly about yourself", "ğŸ§¹ Clean your workspace"],
      ["ğŸ Give a small gift", "ğŸ“£ Share a positive story", "âœ‰ï¸ Write a letter to a loved one", "ğŸ“µ No phone for 1 hour"],
      ["ğŸ¥• Eat more vegetables today", "ğŸ“Œ Set 3 micro goals", "ğŸŒ Spend 10 min in sunlight", "ğŸ§˜ Practice deep breathing"],
      ["ğŸ§‘â€ğŸ³ Cook a meal from scratch", "ğŸ›’ Plan healthy meals", "ğŸ“± Turn off notifications for 2 hours", "ğŸ“ Reflect on your progress"],
      ["ğŸŒº Compliment a stranger", "ğŸ¶ Create a playlist of happy songs", "ğŸ’§ Drink herbal tea", "ğŸ›Œ Go to bed 30 minutes earlier"],
      ["ğŸ“Š Track your habits", "ğŸ–Œï¸ Paint or color", "ğŸ“š Read a poem", "ğŸ¯ Set a new challenge"],
      ["ğŸ“¢ Practice public speaking", "ğŸ“– Read a biography", "ğŸƒ Do a quick workout", "ğŸŒœ Practice gratitude before bed"],
      ["ğŸ•°ï¸ Limit social media to 30 min", "ğŸ’¬ Reach out to an old friend", "ğŸŒŸ List your strengths", "ğŸ¥¤ Drink a smoothie"],
      ["ğŸ’­ Meditate on kindness", "ğŸ–‹ï¸ Write your goals", "ğŸ§‘â€ğŸ¤â€ğŸ§‘ Volunteer", "ğŸ‰ Celebrate a small win"],
      ["ğŸ“• Learn a new word", "ğŸ§© Brain training app", "ğŸ‘Ÿ Take a new route walking", "ğŸ“¦ Donate unused items"],
      ["ğŸ’ Prepare for tomorrow", "ğŸ§˜ Morning stretch", "ğŸ“ Journal your thoughts", "ğŸ¥ Watch an inspiring video"],
      ["ğŸ“š Read non-fiction",