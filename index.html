<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zen Life Reset</title>
  <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#00796b" />
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Quicksand', sans-serif;
      background: linear-gradient(to bottom right, #e0f7fa, #fff3e0);
      color: #37474f;
    }
    .container {
      max-width: 600px;
      margin: 60px auto;
      padding: 25px;
      background: #ffffffcc;
      backdrop-filter: blur(8px);
      border-radius: 16px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }
    h1 {
      text-align: center;
      font-size: 28px;
      margin-bottom: 5px;
      color: #00796b;
    }
    h2 {
      text-align: center;
      font-weight: normal;
      font-size: 16px;
      color: #555;
      margin-bottom: 20px;
    }
    .reading {
      text-align: center;
      font-style: italic;
      font-size: 14px;
      margin-bottom: 20px;
      color: #616161;
    }
    .task {
      background: #fafafa;
      border: 1px solid #cfd8dc;
      border-radius: 10px;
      padding: 12px 16px;
      margin: 15px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 16px;
    }
    .task label {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .task input[type="checkbox"] {
      transform: scale(1.3);
    }
    .stats {
      display: flex;
      justify-content: space-around;
      margin-top: 20px;
      text-align: center;
    }
    .stats div {
      background: #e0f2f1;
      border-radius: 10px;
      padding: 15px;
      width: 30%;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }
    .progress-bar {
      margin-top: 10px;
      background: #b2dfdb;
      border-radius: 10px;
      overflow: hidden;
      height: 14px;
    }
    .progress-fill {
      background: #00796b;
      height: 100%;
      width: 0%;
      transition: width 0.3s ease-in-out;
    }
    #levelUpMessage {
      margin-top: 15px;
      text-align: center;
      color: #388e3c;
      font-weight: bold;
      display: none;
    }
    .btn {
      background: #00796b;
      color: white;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      margin: 30px auto 0;
      display: block;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>🧘 Zen Life Reset</h1>
    <h2>Day <span id="dayNumber"></span> of 60</h2>
    <div class="reading" id="bookText">📖 Loading reading...</div>
    <div id="taskContainer"></div>

    <div class="stats">
      <div><strong>XP</strong><div><span id="xp">0</span>/100</div><div class="progress-bar"><div class="progress-fill" id="xpBar"></div></div></div>
      <div><strong>Coins</strong><div><span id="coins">0</span></div></div>
      <div><strong>Streak</strong><div><span id="streak">0</span> days</div></div>
    </div>

    <div id="levelUpMessage">🎉 You leveled up! Great job! 🎉</div>
    <button class="btn" onclick="resetDay()">Start New Day</button>
  </div>

  <script>
    const taskPool = [...Array(60)].map((_, i) => [
      "📖 Read 1 page from a book",
      ...[
        "🧊 Take a 30-second cold shower",
        "🌅 Watch the sunrise",
        "💬 Compliment someone",
        "💧 Drink 8 glasses of water",
        "🧘 Meditate 10 minutes",
        "✍️ Journal 1 sentence",
        "🍎 Eat a whole fruit",
        "🚶 Walk 15 min outdoors",
        "📵 Delete one app",
        "🧎‍♂️ Stretch for 5 minutes",
        "🙏 List 3 gratitudes",
        "🔌 Turn phone off 30 min",
        "🎨 Make something by hand",
        "🧹 Clean a cluttered spot",
        "📱 Call or text a friend",
        "🌬️ 3 deep 5-sec breaths",
        "📜 Write your future self",
        "🚰 Water only 4 hrs",
        "🌿 Go barefoot outside",
        "😴 Sleep before 10pm",
        "🎧 Listen to new music",
        "💭 Write down a fear",
        "💪 15 squats or pushups",
        "🍽️ Eat without distraction",
        "😂 Make someone laugh",
        "🤐 10 minutes no talking",
        "🕯️ Sit with a candle 5 min",
        "💡 Counter 1 bad belief",
        "📚 Read a Wikipedia page",
        "🤍 Forgive someone mentally",
        "🛏️ Make your bed mindfully",
        "🥬 Eat something green",
        "😌 Sit in silence 5 min",
        "✏️ Draw something",
        "👕 Dress to feel confident",
        "🌟 Leave a good review",
        "👁️ Hold eye contact longer",
        "⛰️ Walk uphill/stairs",
        "📖 Read physical book 10 min",
        "🍵 Make tea, focus on it",
        "💬 Describe your emotion",
        "🙂 Smile at a stranger",
        "🚫 Say no to something today",
        "💡 Eat without your phone",
        "🏆 Reflect on something proud",
        "🗑️ Declutter one item",
        "🧠 Guided meditation 10 min",
        "✨ Recall biggest win this year",
        "💗 Say 'I love you' to yourself",
        "🧍 Stretch every hour today",
        "🗓️ Write top 3 priorities",
        "💃 Move differently today",
        "📵 No social media till lunch",
        "⏳ Work 30 min distraction-free",
        "🥘 Cook from scratch",
        "👂 Listen outside for 2 min",
        "🎯 Write a goal",
        "🧖 Let yourself relax",
        "📬 Unsubscribe from an email",
        "🔮 Visualize your ideal future",
        "📴 Leave your phone in another room"
      ].slice(i * 4, i * 4 + 4)
    ]);

    const bookPages = [...Array(60)].map((_, i) =>
      `Day ${i + 1}: “You have power over your mind—not outside events. Realize this, and you will find strength.” – Marcus Aurelius`
    );

    const today = new Date().toISOString().split("T")[0];
    let lastReset = localStorage.getItem("lastReset") || "";
    let streak = parseInt(localStorage.getItem("streak") || "0");
    if (lastReset !== today) {
      streak += 1;
      localStorage.setItem("streak", streak);
      localStorage.setItem("lastReset", today);
      localStorage.setItem("xp", "0");
      localStorage.setItem("coins", "0");
      for (let i = 0; i < 5; i++) localStorage.setItem(`task${i}`, "false");
    }

    const dayNumber = Math.min(streak, 60);
    document.getElementById("dayNumber").innerText = dayNumber;
    document.getElementById("bookText").innerText = bookPages[dayNumber - 1] || "Enjoy your reading.";
    const container = document.getElementById("taskContainer");

    taskPool[dayNumber - 1]?.forEach((task, i) => {
      const div = document.createElement("div");
      div.className = "task";
      div.innerHTML = `
        <label for="task${i}">${task}</label>
        <input type="checkbox" id="task${i}" ${localStorage.getItem(`task${i}`)==="true"?"checked":""} onchange="checkTask(this, ${i})" />
      `;
      container.appendChild(div);
    });

    let xp = parseInt(localStorage.getItem("xp") || "0");
    let coins = parseInt(localStorage.getItem("coins") || "0");
    document.getElementById("xp").innerText = xp;
    document.getElementById("coins").innerText = coins;
    document.getElementById("streak").innerText = streak;
    document.getElementById("xpBar").style.width = (xp % 100) + "%";
    if (xp >= 100) document.getElementById("levelUpMessage").style.display = "block";

    function checkTask(cb, index) {
      localStorage.setItem(`task${index}`, cb.checked);
      if (cb.checked) {
        xp += 10;
        coins += 1;
      } else {
        xp -= 10;
        coins = Math.max(0, coins - 1);
      }
      localStorage.setItem("xp", xp);
      localStorage.setItem("coins", coins);
      document.getElementById("xp").innerText = xp;
      document.getElementById("coins").innerText = coins;
      document.getElementById("xpBar").style.width = (xp % 100) + "%";
      document.getElementById("levelUpMessage").style.display = xp >= 100 ? "block" : "none";
    }

    function resetDay() {
      alert("✨ New day started. Reflect, reset, and begin again.");
      localStorage.setItem("lastReset", "");
      location.reload();
    }
  </script>
</body>
</html>
